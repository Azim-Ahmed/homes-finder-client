{"ast":null,"code":"import _defineProperty from \"C:/Users/ASUS/Documents/Projects/assignment/VegaHomes/client/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useContext, useEffect, useState } from 'react';\nimport { Col, Row, Table, Button } from 'react-bootstrap';\nimport Layout from '../../Components/Layout';\nimport { UserContext } from '../_app';\nimport Modal from '../../Components/ReUseableUI/Modal';\nimport Input from '../../Components/ReUseableUI/Input';\nimport { api } from '../../urlConfig';\nimport styles from '../../styles/dashboard.module.css';\nimport Loader from '../../Components/Loader';\n\nvar Service = function Service(props) {\n  var _useContext = useContext(UserContext),\n      appData = _useContext.appData,\n      setAppData = _useContext.setAppData; //states of addServices\n\n\n  var _useState = useState(''),\n      name = _useState[0],\n      setName = _useState[1];\n\n  var _useState2 = useState(''),\n      time = _useState2[0],\n      setTime = _useState2[1];\n\n  var _useState3 = useState(''),\n      price = _useState3[0],\n      setPrice = _useState3[1];\n\n  var _useState4 = useState(''),\n      description = _useState4[0],\n      setDescription = _useState4[1];\n\n  var _useState5 = useState(''),\n      servicePicture = _useState5[0],\n      setServicePicture = _useState5[1]; //states of the this component\n\n\n  var _useState6 = useState({}),\n      getAllServices = _useState6[0],\n      setGetAllservices = _useState6[1];\n\n  var _useState7 = useState(false),\n      serviceDetailModal = _useState7[0],\n      setServiceDetailModal = _useState7[1];\n\n  var _useState8 = useState(null),\n      serviceDetails = _useState8[0],\n      setServiceDetails = _useState8[1];\n\n  var _useState9 = useState(false),\n      show = _useState9[0],\n      setShow = _useState9[1]; //update service state\n\n\n  var _useState10 = useState(false),\n      updatedServiceModal = _useState10[0],\n      setUpdatedServiceModal = _useState10[1];\n\n  var _useState11 = useState({}),\n      updatedData = _useState11[0],\n      setUpdatedData = _useState11[1]; //\n\n\n  useEffect(function () {\n    fetch(\"\".concat(api, \"/services/getAllServices\")).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      return setGetAllservices(data.service);\n    });\n  }, [getAllServices]);\n\n  var handleShow = function handleShow() {\n    return setShow(true);\n  }; //show particular service details\n\n\n  var showServiceDetailsModal = function showServiceDetailsModal(service) {\n    setServiceDetails(service);\n    setServiceDetailModal(true);\n  };\n\n  var handleAddService = function handleAddService() {\n    var formData = {\n      name: name,\n      time: time,\n      price: price,\n      description: description,\n      servicePicture: servicePicture\n    };\n    console.log(formData);\n    fetch(\"\".concat(api, \"/service/create\"), {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json'\n      },\n      body: JSON.stringify(formData)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (result) {\n      alert('One Service Item Added');\n    });\n    setShow(false);\n  };\n\n  var renderAllServicesData = function renderAllServicesData() {\n    if (!getAllServices.length) {\n      return /*#__PURE__*/_jsx(Loader, {});\n    }\n\n    return /*#__PURE__*/_jsxs(Table, {\n      responsive: true,\n      style: {\n        fontSize: '.9rem'\n      },\n      striped: true,\n      bordered: true,\n      hover: true,\n      children: [/*#__PURE__*/_jsx(\"thead\", {\n        children: /*#__PURE__*/_jsxs(\"tr\", {\n          children: [/*#__PURE__*/_jsx(\"th\", {\n            children: \"#\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            children: \"Name\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            children: \"Price\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            children: \"Quantity\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            children: \"Shoow Details\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            children: \"update\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            children: \"delete\"\n          })]\n        })\n      }), /*#__PURE__*/_jsx(\"tbody\", {\n        children: getAllServices.length > 0 ? getAllServices.map(function (service, index) {\n          return /*#__PURE__*/_jsxs(\"tr\", {\n            children: [/*#__PURE__*/_jsx(\"td\", {\n              children: index + 1\n            }), /*#__PURE__*/_jsx(\"td\", {\n              children: service.name\n            }), /*#__PURE__*/_jsx(\"td\", {\n              children: service.description\n            }), /*#__PURE__*/_jsx(\"td\", {\n              children: service.price\n            }), /*#__PURE__*/_jsx(\"td\", {\n              children: /*#__PURE__*/_jsxs(Button, {\n                onClick: function onClick() {\n                  return showServiceDetailsModal(service);\n                },\n                variant: \"dark\",\n                children: [' ', \"Show Deatils\"]\n              })\n            }), /*#__PURE__*/_jsx(\"td\", {\n              children: /*#__PURE__*/_jsxs(Button, {\n                onClick: function onClick() {\n                  return updateServiceModal(service);\n                },\n                variant: \"warning\",\n                children: [' ', \"Update\"]\n              })\n            }), /*#__PURE__*/_jsx(\"td\", {\n              children: /*#__PURE__*/_jsxs(Button, {\n                onClick: function onClick() {\n                  return deleteService(service);\n                },\n                variant: \"danger\",\n                children: [' ', \"Delete\"]\n              })\n            })]\n          }, service._id);\n        }) : null\n      })]\n    });\n  }; //add service Modal\n\n\n  var renderAddServiceModal = function renderAddServiceModal() {\n    return /*#__PURE__*/_jsxs(Modal, {\n      size: \"lg\",\n      show: show,\n      addServiceButton: true,\n      onClick: handleAddService,\n      handleClose: function handleClose() {\n        return setShow(false);\n      },\n      modalTitle: \"Add New Service\",\n      children: [/*#__PURE__*/_jsx(Input, {\n        label: \"Name\",\n        value: name,\n        placeholder: \"Service Name\",\n        onChange: function onChange(e) {\n          return setName(e.target.value);\n        }\n      }), /*#__PURE__*/_jsx(Input, {\n        label: \"Price\",\n        value: price,\n        placeholder: \"Price\",\n        onChange: function onChange(e) {\n          return setPrice(e.target.value);\n        }\n      }), /*#__PURE__*/_jsx(Input, {\n        label: \"Time\",\n        value: time,\n        placeholder: \"time\",\n        onChange: function onChange(e) {\n          return setTime(e.target.value);\n        }\n      }), /*#__PURE__*/_jsx(Input, {\n        label: \"Description\",\n        value: description,\n        placeholder: \"Description\",\n        onChange: function onChange(e) {\n          return setDescription(e.target.value);\n        }\n      }), /*#__PURE__*/_jsx(Input, {\n        label: \"servicePicture URL\",\n        value: servicePicture,\n        placeholder: \"servicePicture URL\",\n        onChange: function onChange(e) {\n          return setServicePicture(e.target.value);\n        }\n      })]\n    });\n  }; //service Details\n\n\n  var renderServiceDetailModal = function renderServiceDetailModal() {\n    if (!serviceDetails) {\n      return null && /*#__PURE__*/_jsx(Loader, {});\n    }\n\n    return /*#__PURE__*/_jsxs(Modal, {\n      size: \"lg\",\n      show: serviceDetailModal,\n      showServiceDetailsModal: false,\n      handleClose: function handleClose() {\n        return setServiceDetailModal(false);\n      },\n      modalTitle: \"Service Details\",\n      children: [/*#__PURE__*/_jsxs(Row, {\n        children: [/*#__PURE__*/_jsxs(Col, {\n          md: \"6\",\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            className: \"bg-secondary text-white p-2 key\",\n            children: \"Name\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"value\",\n            children: serviceDetails.name\n          })]\n        }), /*#__PURE__*/_jsxs(Col, {\n          md: \"6\",\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            className: \"bg-secondary text-white p-2 key\",\n            children: \"Price\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"value\",\n            children: serviceDetails.price\n          })]\n        })]\n      }), /*#__PURE__*/_jsxs(Row, {\n        children: [/*#__PURE__*/_jsxs(Col, {\n          md: \"6\",\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            className: \"bg-secondary text-white p-2 key\",\n            children: \"Updated time\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"value\",\n            children: serviceDetails.updatedAt\n          })]\n        }), /*#__PURE__*/_jsxs(Col, {\n          md: \"6\",\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            className: \"bg-secondary text-white p-2 key\",\n            children: \"Created Time\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"value\",\n            children: serviceDetails.createdAt\n          })]\n        })]\n      }), /*#__PURE__*/_jsxs(Row, {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxs(Col, {\n          md: \"12\",\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            className: \"bg-secondary text-white p-2 key\",\n            children: \"Description\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"value\",\n            children: serviceDetails.description\n          })]\n        }), /*#__PURE__*/_jsxs(Col, {\n          md: \"12\",\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            className: \"bg-secondary text-white p-2 key\",\n            children: \"Service Picture\"\n          }), /*#__PURE__*/_jsx(\"img\", {\n            className: \"value img-fluid \".concat(styles.detailsImage),\n            src: serviceDetails.servicePicture\n          })]\n        })]\n      })]\n    });\n  }; //update service section\n\n\n  var updateServiceModal = function updateServiceModal(service) {\n    setServiceDetails(service);\n    setUpdatedServiceModal(true);\n  };\n\n  var handleServiceInput = function handleServiceInput(e) {\n    setUpdatedData(_objectSpread(_objectSpread({}, updatedData), {}, _defineProperty({}, e.target.name, e.target.value)));\n  };\n\n  var updateServiceForm = function updateServiceForm() {\n    if (updatedData) {\n      fetch(\"\".concat(api, \"/service/update/\").concat(serviceDetails._id), {\n        method: 'PATCH',\n        headers: {\n          'content-type': 'application/json'\n        },\n        body: JSON.stringify(updatedData)\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        alert('Updated');\n      });\n      setUpdatedServiceModal(false);\n    } else {\n      fetch(\"\".concat(api, \"/service/update/\").concat(serviceDetails._id), {\n        method: 'PATCH',\n        headers: {\n          'content-type': 'application/json'\n        },\n        body: JSON.stringify(serviceDetails)\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        alert('Updated');\n      });\n      setUpdatedServiceModal(false);\n    }\n  }; //update service modal\n\n\n  var renderUpdateServicesModal = function renderUpdateServicesModal() {\n    if (!serviceDetails) {\n      return null;\n    }\n\n    return /*#__PURE__*/_jsxs(Modal, {\n      show: updatedServiceModal,\n      modalTitle: \"Update Service\" // handleClose={updateServiceForm}\n      ,\n      onClick: updateServiceForm,\n      handleClose: function handleClose() {\n        return setUpdatedServiceModal(false);\n      },\n      size: \"lg\",\n      update: true,\n      children: [/*#__PURE__*/_jsxs(Row, {\n        children: [/*#__PURE__*/_jsxs(Col, {\n          md: 6,\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            className: \"key\",\n            children: \"Name\"\n          }), /*#__PURE__*/_jsx(Input, {\n            name: \"name\",\n            defaultValue: serviceDetails.name,\n            placeholder: \"Service Name\",\n            onChange: handleServiceInput\n          })]\n        }), /*#__PURE__*/_jsxs(Col, {\n          md: 6,\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            className: \"key\",\n            children: \"Price\"\n          }), /*#__PURE__*/_jsx(Input, {\n            name: \"price\",\n            defaultValue: serviceDetails.price,\n            placeholder: \"Price\",\n            onChange: handleServiceInput\n          })]\n        })]\n      }), /*#__PURE__*/_jsxs(Row, {\n        children: [/*#__PURE__*/_jsxs(Col, {\n          md: 6,\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            className: \"key\",\n            children: \"Description\"\n          }), /*#__PURE__*/_jsx(Input, {\n            name: \"description\",\n            defaultValue: serviceDetails.description,\n            placeholder: \"Description\",\n            onChange: handleServiceInput\n          })]\n        }), /*#__PURE__*/_jsxs(Col, {\n          md: 6,\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            className: \"key\",\n            children: \"Time\"\n          }), /*#__PURE__*/_jsx(Input, {\n            name: \"time\",\n            defaultValue: serviceDetails.time,\n            placeholder: \"Time\",\n            onChange: handleServiceInput\n          })]\n        })]\n      }), /*#__PURE__*/_jsx(Row, {\n        children: /*#__PURE__*/_jsxs(Col, {\n          md: 12,\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            className: \"key\",\n            children: \"servicePicture\"\n          }), /*#__PURE__*/_jsx(Input, {\n            name: \"servicePicture\",\n            defaultValue: serviceDetails.servicePicture,\n            placeholder: \"servicePicture\",\n            onChange: handleServiceInput\n          })]\n        })\n      })]\n    });\n  };\n\n  var deleteService = function deleteService(service) {\n    fetch(\"\".concat(api, \"/service/delete/\").concat(service._id), {\n      method: 'DELETE'\n    }).then(function (res) {\n      return res.json();\n    }).then(function (result) {\n      alert('deleted');\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(Layout, {\n    dashboard: true,\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"d-flex justify-content-between my-3\",\n      children: [/*#__PURE__*/_jsx(\"h1\", {\n        className: \"text-white\",\n        children: \"Service\"\n      }), /*#__PURE__*/_jsx(Button, {\n        variant: \"primary\",\n        onClick: handleShow,\n        children: \"Add Service\"\n      }), ' ']\n    }), renderAllServicesData(), renderAddServiceModal(), renderServiceDetailModal(), renderUpdateServicesModal()]\n  });\n};\n\nexport default Service;","map":null,"metadata":{},"sourceType":"module"}