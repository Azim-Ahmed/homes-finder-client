{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useContext, useEffect } from 'react';\nimport { Col, Container, Row, Button } from 'react-bootstrap';\nimport { UserContext } from './_app';\nimport Link from 'next/link';\nimport styles from '../styles/login.module.css';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport firebaseConfig from '../firebase.config';\nimport { useRouter } from 'next/router';\nimport Image from 'next/image';\n\nconst Login = ({\n  getAdminEmail\n}) => {\n  console.log(getAdminEmail.email);\n  const allAdminEMail = getAdminEmail.email;\n  const {\n    appData,\n    setAppData,\n    loggedIn,\n    setLoggedIn,\n    admin,\n    setAdmin\n  } = useContext(UserContext);\n\n  if (firebase.apps.length === 0) {\n    firebase.initializeApp(firebaseConfig);\n  } // useEffect(() => {\n  //   localStorage.setItem('_increment', JSON.stringify(appData));\n  // }, []);\n\n\n  const router = useRouter();\n  const dashboardSection = 'dashboard/home';\n  const loginSection = '/login';\n  const adminEmail = allAdminEMail.filter(data => data.email == appData.email);\n  console.log(adminEmail);\n\n  if (!adminEmail) {\n    setAdmin(false);\n    router.push(loginSection);\n  }\n\n  if (adminEmail) {\n    setAdmin(true);\n    router.push(dashboardSection);\n  }\n\n  const handleGoogleSignIn = () => {\n    var provider = new firebase.auth.GoogleAuthProvider();\n    firebase.auth().signInWithPopup(provider).then(function (result) {\n      const {\n        displayName,\n        email\n      } = result.user;\n      const loggedInUser = {\n        name: displayName,\n        email\n      };\n      localStorage.setItem('data', loggedInUser);\n      setAppData(loggedInUser); //localStorage.setItem('data', loggedInUser);\n      // window.store = loggedInUser;\n\n      console.log(loggedInUser);\n      console.log(appData); // if (typeof window !== 'undefined') {\n      //   localStorage.setItem(data, loggedInUser);\n      // }\n    }).catch(function (error) {\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      var email = error.email;\n      var credential = error.credential;\n      console.log(errorCode, email, credential, errorMessage);\n    });\n  };\n\n  return /*#__PURE__*/_jsx(Container, {\n    children: /*#__PURE__*/_jsx(Row, {\n      className: \"my-5 text-center\",\n      children: /*#__PURE__*/_jsxs(Col, {\n        className: styles.authSection,\n        md: {\n          span: 6,\n          offset: 3\n        },\n        sm: {\n          span: 12\n        },\n        children: [/*#__PURE__*/_jsx(Link, {\n          href: \"/\",\n          children: /*#__PURE__*/_jsxs(\"a\", {\n            children: [' ', /*#__PURE__*/_jsx(Image, {\n              src: \"/favicon.png\",\n              width: 300,\n              height: 100,\n              alt: \"logo image\"\n            })]\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: styles.googleAuthSection,\n          children: /*#__PURE__*/_jsx(Button, {\n            variant: \"outline-danger\",\n            onClick: handleGoogleSignIn,\n            children: \"Continue With google\"\n          })\n        })]\n      })\n    })\n  });\n};\n\nexport default Login;\nexport async function getServerSideProps() {\n  const res = await fetch('http://localhost:2000/api/admin/getAllAdmins');\n  const getAdminEmail = await res.json();\n  return {\n    props: {\n      getAdminEmail\n    }\n  };\n}","map":null,"metadata":{},"sourceType":"module"}