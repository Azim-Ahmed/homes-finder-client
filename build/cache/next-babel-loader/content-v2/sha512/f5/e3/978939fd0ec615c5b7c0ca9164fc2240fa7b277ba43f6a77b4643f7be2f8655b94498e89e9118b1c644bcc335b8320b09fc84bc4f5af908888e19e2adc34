{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Documents\\\\Projects\\\\assignment\\\\VegaHomes\\\\client\\\\src\\\\pages\\\\login.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useContext, useEffect, useState } from 'react';\nimport { Col, Container, Row, Button } from 'react-bootstrap';\nimport { UserContext } from './_app';\nimport Link from 'next/link';\nimport styles from '../styles/login.module.css';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport firebaseConfig from '../firebase.config';\nimport { useRouter } from 'next/router';\nimport Image from 'next/image';\n\nconst Login = () => {\n  const router = useRouter();\n  const dashboardSection = '/dashboard/home';\n  const loginSection = '/login';\n  const {\n    0: appData,\n    1: setAppData,\n    2: loggedIn,\n    3: setLoggedIn\n  } = useContext(UserContext);\n  const {\n    0: userData,\n    1: setUserData\n  } = useState({\n    email: '',\n    name: ''\n  });\n  const {\n    0: adminEmails,\n    1: setAdminEmails\n  } = useState(null);\n  const {\n    0: admin,\n    1: setAdmin\n  } = useState(false);\n\n  if (firebase.apps.length === 0) {\n    firebase.initializeApp(firebaseConfig);\n  }\n\n  useEffect(async () => {\n    let response = await fetch('http://localhost:2000/api/admin/getAllAdmins');\n    response = await response.json();\n    setAdminEmails(response.email);\n  }, []);\n  console.log(adminEmails); // localStorage.setItem('_increment', JSON.stringify(appData));\n  // }, []);\n\n  const handleGoogleSignIn = () => {\n    var provider = new firebase.auth.GoogleAuthProvider();\n    firebase.auth().signInWithPopup(provider).then(async function (result) {\n      const {\n        displayName,\n        email\n      } = await result.user;\n      const loggedInUser = {\n        name: displayName,\n        email\n      }; //localStorage.setItem('data', loggedInUser);\n\n      setUserData(_objectSpread(_objectSpread({}, loggedInUser), {}, {\n        name: displayName,\n        email: email\n      })); //localStorage.setItem('data', loggedInUser);\n      // window.store = loggedInUser;\n\n      console.log(loggedInUser);\n      console.log(userData);\n      let adminEmail = adminEmails.filter(data => data.email == loggedInUser.email);\n      console.log(adminEmail);\n\n      if (!adminEmail[0].email) {\n        setAdmin(false);\n        router.push(loginSection);\n      }\n\n      if (adminEmail[0].email) {\n        setAdmin(true);\n        router.push(dashboardSection);\n      } // if (typeof window !== 'undefined') {\n      //   localStorage.setItem(data, loggedInUser);\n      // }\n\n    }).catch(function (error) {\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      var email = error.email;\n      var credential = error.credential;\n      console.log(errorCode, email, credential, errorMessage);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      className: \"my-5 text-center\",\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        className: styles.authSection,\n        md: {\n          span: 6,\n          offset: 3\n        },\n        sm: {\n          span: 12\n        },\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          href: \"/\",\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            children: [' ', /*#__PURE__*/_jsxDEV(Image, {\n              src: \"/favicon.png\",\n              width: 300,\n              height: 100,\n              alt: \"logo image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.googleAuthSection,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline-danger\",\n            onClick: handleGoogleSignIn,\n            children: \"Continue With google\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n};\n\nexport default Login; // export async function getServerSideProps() {\n//   const res = await fetch('');\n//   const getAdminEmail = await res.json();\n//   return {\n//     props: {\n//       getAdminEmail,\n//     },\n//   };\n// }","map":{"version":3,"sources":["C:/Users/ASUS/Documents/Projects/assignment/VegaHomes/client/src/pages/login.jsx"],"names":["useContext","useEffect","useState","Col","Container","Row","Button","UserContext","Link","styles","firebase","firebaseConfig","useRouter","Image","Login","router","dashboardSection","loginSection","appData","setAppData","loggedIn","setLoggedIn","userData","setUserData","email","name","adminEmails","setAdminEmails","admin","setAdmin","apps","length","initializeApp","response","fetch","json","console","log","handleGoogleSignIn","provider","auth","GoogleAuthProvider","signInWithPopup","then","result","displayName","user","loggedInUser","adminEmail","filter","data","push","catch","error","errorCode","code","errorMessage","message","credential","authSection","span","offset","googleAuthSection"],"mappings":"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","sourcesContent":["import { useContext, useEffect, useState } from 'react';\r\nimport { Col, Container, Row, Button } from 'react-bootstrap';\r\nimport { UserContext } from './_app';\r\nimport Link from 'next/link';\r\nimport styles from '../styles/login.module.css';\r\nimport firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport firebaseConfig from '../firebase.config';\r\nimport { useRouter } from 'next/router';\r\nimport Image from 'next/image';\r\n\r\nconst Login = () => {\r\n  const router = useRouter();\r\n  const dashboardSection = '/dashboard/home';\r\n  const loginSection = '/login';\r\n  const [appData, setAppData, loggedIn, setLoggedIn] = useContext(UserContext);\r\n  const [userData, setUserData] = useState({\r\n    email: '',\r\n    name: '',\r\n  });\r\n  const [adminEmails, setAdminEmails] = useState(null);\r\n  const [admin, setAdmin] = useState(false);\r\n  if (firebase.apps.length === 0) {\r\n    firebase.initializeApp(firebaseConfig);\r\n  }\r\n\r\n  useEffect(async () => {\r\n    let response = await fetch('http://localhost:2000/api/admin/getAllAdmins');\r\n    response = await response.json();\r\n    setAdminEmails(response.email);\r\n  }, []);\r\n  console.log(adminEmails);\r\n\r\n  // localStorage.setItem('_increment', JSON.stringify(appData));\r\n  // }, []);\r\n\r\n  const handleGoogleSignIn = () => {\r\n    var provider = new firebase.auth.GoogleAuthProvider();\r\n    firebase\r\n      .auth()\r\n      .signInWithPopup(provider)\r\n      .then(async function (result) {\r\n        const { displayName, email } = await result.user;\r\n        const loggedInUser = { name: displayName, email };\r\n        //localStorage.setItem('data', loggedInUser);\r\n        setUserData({\r\n          ...loggedInUser,\r\n          name: displayName,\r\n          email: email,\r\n        });\r\n        //localStorage.setItem('data', loggedInUser);\r\n        // window.store = loggedInUser;\r\n\r\n        console.log(loggedInUser);\r\n        console.log(userData);\r\n        let adminEmail = adminEmails.filter(\r\n          (data) => data.email == loggedInUser.email\r\n        );\r\n        console.log(adminEmail);\r\n\r\n        if (!adminEmail[0].email) {\r\n          setAdmin(false);\r\n          router.push(loginSection);\r\n        }\r\n\r\n        if (adminEmail[0].email) {\r\n          setAdmin(true);\r\n          router.push(dashboardSection);\r\n        }\r\n\r\n        // if (typeof window !== 'undefined') {\r\n        //   localStorage.setItem(data, loggedInUser);\r\n        // }\r\n      })\r\n      .catch(function (error) {\r\n        var errorCode = error.code;\r\n        var errorMessage = error.message;\r\n        var email = error.email;\r\n        var credential = error.credential;\r\n        console.log(errorCode, email, credential, errorMessage);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <Row className=\"my-5 text-center\">\r\n        <Col\r\n          className={styles.authSection}\r\n          md={{ span: 6, offset: 3 }}\r\n          sm={{ span: 12 }}\r\n        >\r\n          <Link href=\"/\">\r\n            <a>\r\n              {' '}\r\n              <Image\r\n                src=\"/favicon.png\"\r\n                width={300}\r\n                height={100}\r\n                alt=\"logo image\"\r\n              />\r\n            </a>\r\n          </Link>\r\n          <div className={styles.googleAuthSection}>\r\n            <Button variant=\"outline-danger\" onClick={handleGoogleSignIn}>\r\n              Continue With google\r\n            </Button>\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n\r\n// export async function getServerSideProps() {\r\n//   const res = await fetch('');\r\n//   const getAdminEmail = await res.json();\r\n\r\n//   return {\r\n//     props: {\r\n//       getAdminEmail,\r\n//     },\r\n//   };\r\n// }\r\n"]},"metadata":{},"sourceType":"module"}