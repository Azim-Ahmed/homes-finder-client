{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useContext, useEffect } from 'react';\nimport { Col, Container, Row, Button } from 'react-bootstrap';\nimport { UserContext } from './_app';\nimport Link from 'next/link';\nimport styles from '../styles/login.module.css';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport firebaseConfig from '../firebase.config';\nimport { useRouter } from 'next/router';\nimport Image from 'next/image';\n\nvar Login = function Login(_ref) {\n  var getAdminEmail = _ref.getAdminEmail;\n  console.log(getAdminEmail.email);\n  var allAdminEMail = getAdminEmail.email;\n\n  var _useContext = useContext(UserContext),\n      appData = _useContext.appData,\n      setAppData = _useContext.setAppData,\n      loggedIn = _useContext.loggedIn,\n      setLoggedIn = _useContext.setLoggedIn,\n      admin = _useContext.admin,\n      setAdmin = _useContext.setAdmin;\n\n  if (firebase.apps.length === 0) {\n    firebase.initializeApp(firebaseConfig);\n  } // useEffect(() => {\n  //   localStorage.setItem('_increment', JSON.stringify(appData));\n  // }, []);\n\n\n  var router = useRouter();\n  var dashboardSection = 'dashboard/home';\n  var loginSection = '/login';\n  var adminEmail = allAdminEMail.filter(function (data) {\n    return data.email == appData.email;\n  });\n  console.log(adminEmail);\n\n  if (!adminEmail) {\n    setAdmin(false);\n    router.push(loginSection);\n  }\n\n  if (adminEmail) {\n    setAdmin(true);\n    router.push(dashboardSection);\n  }\n\n  var handleGoogleSignIn = function handleGoogleSignIn() {\n    var provider = new firebase.auth.GoogleAuthProvider();\n    firebase.auth().signInWithPopup(provider).then(function (result) {\n      var _result$user = result.user,\n          displayName = _result$user.displayName,\n          email = _result$user.email;\n      var loggedInUser = {\n        name: displayName,\n        email: email\n      };\n      localStorage.setItem('data', loggedInUser);\n      setAppData(loggedInUser); //localStorage.setItem('data', loggedInUser);\n      // window.store = loggedInUser;\n\n      console.log(loggedInUser);\n      console.log(appData); // if (typeof window !== 'undefined') {\n      //   localStorage.setItem(data, loggedInUser);\n      // }\n    })[\"catch\"](function (error) {\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      var email = error.email;\n      var credential = error.credential;\n      console.log(errorCode, email, credential, errorMessage);\n    });\n  };\n\n  return /*#__PURE__*/_jsx(Container, {\n    children: /*#__PURE__*/_jsx(Row, {\n      className: \"my-5 text-center\",\n      children: /*#__PURE__*/_jsxs(Col, {\n        className: styles.authSection,\n        md: {\n          span: 6,\n          offset: 3\n        },\n        sm: {\n          span: 12\n        },\n        children: [/*#__PURE__*/_jsx(Link, {\n          href: \"/\",\n          children: /*#__PURE__*/_jsxs(\"a\", {\n            children: [' ', /*#__PURE__*/_jsx(Image, {\n              src: \"/favicon.png\",\n              width: 300,\n              height: 100,\n              alt: \"logo image\"\n            })]\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: styles.googleAuthSection,\n          children: /*#__PURE__*/_jsx(Button, {\n            variant: \"outline-danger\",\n            onClick: handleGoogleSignIn,\n            children: \"Continue With google\"\n          })\n        })]\n      })\n    })\n  });\n};\n\nexport var __N_SSP = true;\nexport default Login;","map":null,"metadata":{},"sourceType":"module"}